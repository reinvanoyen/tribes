!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Colyseus=t()}}(function(){return function t(e,r,n){function o(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return o(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){var n=t("./lib/backoff"),o=t("./lib/strategy/exponential"),i=t("./lib/strategy/fibonacci"),a=t("./lib/function_call.js");e.exports.Backoff=n,e.exports.FunctionCall=a,e.exports.FibonacciStrategy=i,e.exports.ExponentialStrategy=o,e.exports.fibonacci=function(t){return new n(new i(t))},e.exports.exponential=function(t){return new n(new o(t))},e.exports.call=function(t,e,r){var n=Array.prototype.slice.call(arguments);return t=n[0],e=n.slice(1,n.length-1),r=n[n.length-1],new a(t,e,r)}},{"./lib/backoff":2,"./lib/function_call.js":3,"./lib/strategy/exponential":4,"./lib/strategy/fibonacci":5}],2:[function(t,e,r){function n(t){o.EventEmitter.call(this),this.backoffStrategy_=t,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}var o=t("events"),i=t("precond"),a=t("util");a.inherits(n,o.EventEmitter),n.prototype.failAfter=function(t){i.checkArgument(t>0,"Expected a maximum number of retry greater than 0 but got %s.",t),this.maxNumberOfRetry_=t},n.prototype.backoff=function(t){i.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",t),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,t))},n.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},n.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=n},{events:10,precond:34,util:39}],3:[function(t,e,r){function n(t,e,r){o.EventEmitter.call(this),i.checkIsFunction(t,"Expected fn to be a function."),i.checkIsArray(e,"Expected args to be an array."),i.checkIsFunction(r,"Expected callback to be a function."),this.function_=t,this.arguments_=e,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.state_=n.State_.PENDING}var o=t("events"),i=t("precond"),a=t("util"),s=t("./backoff"),u=t("./strategy/fibonacci");a.inherits(n,o.EventEmitter),n.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},n.prototype.isPending=function(){return this.state_==n.State_.PENDING},n.prototype.isRunning=function(){return this.state_==n.State_.RUNNING},n.prototype.isCompleted=function(){return this.state_==n.State_.COMPLETED},n.prototype.isAborted=function(){return this.state_==n.State_.ABORTED},n.prototype.setStrategy=function(t){return i.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=t,this},n.prototype.getLastResult=function(){return this.lastResult_.concat()},n.prototype.getNumRetries=function(){return this.numRetries_},n.prototype.failAfter=function(t){return i.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=t,this},n.prototype.abort=function(){i.checkState(!this.isCompleted(),"FunctionCall already completed."),this.isRunning()&&this.backoff_.reset(),this.state_=n.State_.ABORTED},n.prototype.start=function(t){i.checkState(!this.isAborted(),"FunctionCall aborted."),i.checkState(this.isPending(),"FunctionCall already started.");var e=this.strategy_||new u;this.backoff_=t?t(e):new s(e),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=n.State_.RUNNING,this.doCall_(!1)},n.prototype.doCall_=function(t){t&&this.numRetries_++;var e=["call"].concat(this.arguments_);o.EventEmitter.prototype.emit.apply(this,e);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},n.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},n.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var t=Array.prototype.slice.call(arguments);this.lastResult_=t,o.EventEmitter.prototype.emit.apply(this,["callback"].concat(t)),t[0]?this.backoff_.backoff(t[0]):(this.state_=n.State_.COMPLETED,this.doCallback_())}},n.prototype.handleBackoff_=function(t,e,r){this.emit("backoff",t,e,r)},e.exports=n},{"./backoff":2,"./strategy/fibonacci":5,events:10,precond:34,util:39}],4:[function(t,e,r){function n(t){a.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=n.DEFAULT_FACTOR,t&&void 0!==t.factor&&(i.checkArgument(t.factor>1,"Exponential factor should be greater than 1 but got %s.",t.factor),this.factor_=t.factor)}var o=t("util"),i=t("precond"),a=t("./strategy");o.inherits(n,a),n.DEFAULT_FACTOR=2,n.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},n.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=n},{"./strategy":6,precond:34,util:39}],5:[function(t,e,r){function n(t){i.call(this,t),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}var o=t("util"),i=t("./strategy");o.inherits(n,i),n.prototype.next_=function(){var t=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=t,t},n.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=n},{"./strategy":6,util:39}],6:[function(t,e,r){function n(t){return void 0!==t&&null!==t}function o(t){if(t=t||{},n(t.initialDelay)&&t.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(n(t.maxDelay)&&t.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=t.initialDelay||100,this.maxDelay_=t.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(n(t.randomisationFactor)&&(t.randomisationFactor<0||t.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=t.randomisationFactor||0}t("events"),t("util");o.prototype.getMaxDelay=function(){return this.maxDelay_},o.prototype.getInitialDelay=function(){return this.initialDelay_},o.prototype.next=function(){var t=this.next_(),e=1+Math.random()*this.randomisationFactor_,r=Math.round(t*e);return r},o.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},o.prototype.reset=function(){this.reset_()},o.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=o},{events:10,util:39}],7:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:f+26>e?e-f+26:void 0}function r(t){function r(t){f[l++]=t}var n,o,a,s,u,f;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,f=new i(3*t.length/4-u),a=u>0?t.length-4:t.length;var l=0;for(n=0,o=0;a>n;n+=4,o+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),f}function o(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,a,s=t.length%3,u="";for(o=0,a=t.length-s;a>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=r(i);switch(s){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),f="a".charCodeAt(0),c="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],8:[function(t,e,r){(function(e){function n(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(r){return!1}}function o(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new i(t,arguments[1]):new i(t)}function a(t,e){if(t=y(t,0>e?0:0|v(e)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;e>r;r++)t[r]=0;return t}function s(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|b(e,r);return t=y(t,n),t.write(e,r),t}function u(t,e){if(i.isBuffer(e))return f(t,e);if(Q(e))return c(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return l(t,e);if(e instanceof ArrayBuffer)return h(t,e)}return e.length?p(t,e):d(t,e)}function f(t,e){var r=0|v(e.length);return t=y(t,r),e.copy(t,0,0,r),t}function c(t,e){var r=0|v(e.length);t=y(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function l(t,e){var r=0|v(e.length);t=y(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function h(t,e){return i.TYPED_ARRAY_SUPPORT?(e.byteLength,t=i._augment(new Uint8Array(e))):t=l(t,new Uint8Array(e)),t}function p(t,e){var r=0|v(e.length);t=y(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function d(t,e){var r,n=0;"Buffer"===e.type&&Q(e.data)&&(r=e.data,n=0|v(r.length)),t=y(t,n);for(var o=0;n>o;o+=1)t[o]=255&r[o];return t}function y(t,e){i.TYPED_ARRAY_SUPPORT?(t=i._augment(new Uint8Array(e)),t.__proto__=i.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=i.poolSize>>>1;return r&&(t.parent=X),t}function v(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function g(t,e){if(!(this instanceof g))return new g(t,e);var r=new i(t,e);return delete r.parent,r}function b(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return J(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return P(this,e,r);case"utf8":case"utf-8":return I(this,e,r);case"ascii":return U(this,e,r);case"binary":return B(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function E(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;n>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[r+a]=s}return a}function w(t,e,r,n){return V(J(e,t.length-r),t,r,n)}function _(t,e,r,n){return V(G(e),t,r,n)}function A(t,e,r,n){return _(t,e,r,n)}function k(t,e,r,n){return V(q(e),t,r,n)}function x(t,e,r,n){return V(H(e,t.length-r),t,r,n)}function O(t,e,r){return 0===e&&r===t.length?W.fromByteArray(t):W.fromByteArray(t.slice(e,r))}function I(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;r>o;){var i=t[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(r>=o+s){var u,f,c,l;switch(s){case 1:128>i&&(a=i);break;case 2:u=t[o+1],128===(192&u)&&(l=(31&i)<<6|63&u,l>127&&(a=l));break;case 3:u=t[o+1],f=t[o+2],128===(192&u)&&128===(192&f)&&(l=(15&i)<<12|(63&u)<<6|63&f,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:u=t[o+1],f=t[o+2],c=t[o+3],128===(192&u)&&128===(192&f)&&128===(192&c)&&(l=(15&i)<<18|(63&u)<<12|(63&f)<<6|63&c,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return R(n)}function R(t){var e=t.length;if(Z>=e)return String.fromCharCode.apply(String,t);for(var r="",n=0;e>n;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Z));return r}function U(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;r>o;o++)n+=String.fromCharCode(127&t[o]);return n}function B(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;r>o;o++)n+=String.fromCharCode(t[o]);return n}function P(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=e;r>i;i++)o+=z(t[i]);return o}function S(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function T(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,r,n,o,a){if(!i.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function L(t,e,r,n){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);i>o;o++)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function N(t,e,r,n){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);i>o;o++)t[r+o]=e>>>8*(n?o:3-o)&255}function j(t,e,r,n,o,i){if(e>o||i>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function C(t,e,r,n,o){return o||j(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,e,r,n,23,4),r+4}function M(t,e,r,n,o){return o||j(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,e,r,n,52,8),r+8}function F(t){if(t=Y(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function z(t){return 16>t?"0"+t.toString(16):t.toString(16)}function J(t,e){e=e||1/0;for(var r,n=t.length,o=null,i=[],a=0;n>a;a++){if(r=t.charCodeAt(a),r>55295&&57344>r){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(56320>r){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,128>r){if((e-=1)<0)break;i.push(r)}else if(2048>r){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(1114112>r))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function G(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function H(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);a++)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function q(t){return W.toByteArray(F(t))}function V(t,e,r,n){for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}var W=t("base64-js"),$=t("ieee754"),Q=t("is-array");r.Buffer=i,r.SlowBuffer=g,r.INSPECT_MAX_BYTES=50,i.poolSize=8192;var X={};i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:n(),i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array),i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,a=Math.min(r,n);a>o&&t[o]===e[o];)++o;return o!==a&&(r=t[o],n=e[o]),n>r?-1:r>n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Q(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new i(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new i(e),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(n,o),o+=a.length}return n},i.byteLength=b,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):m.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===i.compare(this,t)},i.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},i.prototype.compare=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:i.compare(this,t)},i.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,o=0;r+o<t.length;o++)if(t[r+o]===e[-1===n?0:o-n]){if(-1===n&&(n=o),o-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(i.isBuffer(t))return r(this,t,e);if("number"==typeof t)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var o=n;n=e,e=0|r,r=o}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return E(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return _(this,t,e,r);case"binary":return A(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var n;if(i.TYPED_ARRAY_SUPPORT)n=i._augment(this.subarray(t,e));else{var o=e-t;n=new i(o,void 0);for(var a=0;o>a;a++)n[a]=this[a+t]}return n.length&&(n.parent=this.parent||this),n},i.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||T(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},i.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||T(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},i.prototype.readUInt8=function(t,e){return e||T(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return e||T(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return e||T(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return e||T(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return e||T(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||T(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*e)),n},i.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||T(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return e||T(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){e||T(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(t,e){e||T(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(t,e){return e||T(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return e||T(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return e||T(t,4,this.length),$.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return e||T(t,4,this.length),$.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return e||T(t,8,this.length),$.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return e||T(t,8,this.length),$.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||D(this,t,e,r,Math.pow(2,8*r),0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},i.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||D(this,t,e,r,Math.pow(2,8*r),0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},i.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,1,255,0),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},i.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},i.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},i.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},i.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=0,a=1,s=0>t?1:0;for(this[e]=255&t;++i<r&&(a*=256);)this[e+i]=(t/a>>0)-s&255;return e+r},i.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var o=Math.pow(2,8*r-1);D(this,t,e,r,o-1,-o)}var i=r-1,a=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=(t/a>>0)-s&255;return e+r},i.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,1,127,-128),i.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},i.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},i.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},i.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||D(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),i.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},i.prototype.writeFloatLE=function(t,e,r){return C(this,t,e,!0,r)},i.prototype.writeFloatBE=function(t,e,r){return C(this,t,e,!1,r)},i.prototype.writeDoubleLE=function(t,e,r){return M(this,t,e,!0,r)},i.prototype.writeDoubleBE=function(t,e,r){return M(this,t,e,!1,r)},i.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&r>n&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,a=n-r;if(this===t&&e>r&&n>e)for(o=a-1;o>=0;o--)t[o+e]=this[o+r];else if(1e3>a||!i.TYPED_ARRAY_SUPPORT)for(o=0;a>o;o++)t[o+e]=this[o+r];else t._set(this.subarray(r,r+a),e);return a},i.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var o=J(t.toString()),i=o.length;for(n=e;r>n;n++)this[n]=o[n%i]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var K=i.prototype;i._augment=function(t){return t.constructor=i,t._isBuffer=!0,t._set=t.set,t.get=K.get,t.set=K.set,t.write=K.write,t.toString=K.toString,t.toLocaleString=K.toString,t.toJSON=K.toJSON,t.equals=K.equals,t.compare=K.compare,t.indexOf=K.indexOf,t.copy=K.copy,t.slice=K.slice,t.readUIntLE=K.readUIntLE,t.readUIntBE=K.readUIntBE,t.readUInt8=K.readUInt8,t.readUInt16LE=K.readUInt16LE,t.readUInt16BE=K.readUInt16BE,t.readUInt32LE=K.readUInt32LE,t.readUInt32BE=K.readUInt32BE,t.readIntLE=K.readIntLE,t.readIntBE=K.readIntBE,t.readInt8=K.readInt8,t.readInt16LE=K.readInt16LE,t.readInt16BE=K.readInt16BE,t.readInt32LE=K.readInt32LE,t.readInt32BE=K.readInt32BE,t.readFloatLE=K.readFloatLE,t.readFloatBE=K.readFloatBE,t.readDoubleLE=K.readDoubleLE,t.readDoubleBE=K.readDoubleBE,t.writeUInt8=K.writeUInt8,t.writeUIntLE=K.writeUIntLE,t.writeUIntBE=K.writeUIntBE,t.writeUInt16LE=K.writeUInt16LE,t.writeUInt16BE=K.writeUInt16BE,t.writeUInt32LE=K.writeUInt32LE,t.writeUInt32BE=K.writeUInt32BE,t.writeIntLE=K.writeIntLE,t.writeIntBE=K.writeIntBE,t.writeInt8=K.writeInt8,t.writeInt16LE=K.writeInt16LE,t.writeInt16BE=K.writeInt16BE,t.writeInt32LE=K.writeInt32LE,t.writeInt32BE=K.writeInt32BE,t.writeFloatLE=K.writeFloatLE,t.writeFloatBE=K.writeFloatBE,t.writeDoubleLE=K.writeDoubleLE,t.writeDoubleBE=K.writeDoubleBE,t.fill=K.fill,t.inspect=K.inspect,t.toArrayBuffer=K.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":7,ieee754:12,"is-array":14}],9:[function(t,e,r){function n(){return this instanceof n?void 0:new n}!function(t){function r(t){for(var e in f)t[e]=f[e];return t}function n(t,e){return s(this,t).push(e),this}function o(t,e){function r(){i.call(n,t,r),e.apply(this,arguments)}var n=this;return s(n,t).push(r),n}function i(t,e){function r(t){return t!==e}var n,o=this;if(t){if(e){if(n=s(o,t,!0)){if(n=n.filter(r),!n.length)return i.call(o,t);o[u][t]=n}}else if(n=o[u],n&&(delete n[t],!Object.keys(n).length))return i.call(o)}else delete o[u];return o}function a(t,e){function r(t){t.call(i)}function n(t){t.call(i,e)}function o(t){t.apply(i,f)}var i=this,a=s(i,t,!0);if(!a)return!1;var u=arguments.length;if(1===u)a.forEach(r);else if(2===u)a.forEach(n);else{var f=Array.prototype.slice.call(arguments,1);a.forEach(o)}return!!a.length}function s(t,e,r){if(!r||t[u]){var n=t[u]||(t[u]={});return n[e]||(n[e]=[])}}"undefined"!=typeof e&&(e.exports=t);var u="listeners",f={on:n,once:o,off:i,emit:a};r(t.prototype),t.mixin=r}(n)},{}],10:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,i,u,f;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(a(r))for(i=Array.prototype.slice.call(arguments,1),f=r.slice(),n=f.length,u=0;n>u;u++)f[u].apply(this,i);return!0},n.prototype.addListener=function(t,e){var r;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,i,s;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],i=r.length,n=-1,r===e||o(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=i;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],o(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){
if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],11:[function(t,e,r){var n,o=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=Error;!function(t){function e(t,r){switch(typeof t){case"undefined":case"boolean":case"string":case"number":return t===r;case"object":if(null===t)return null===r;if(P(t)){if(!P(r)||t.length!==r.length)return!1;for(var n=0,o=t.length;o>n;n++)if(!e(t[n],r[n]))return!1;return!0}var i=A(r),a=i.length;if(A(t).length!==a)return!1;for(var n=0;a>n;n++)if(!e(t[n],r[n]))return!1;return!0;default:return!1}}function r(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function n(t,e){var o;for(var i in t)if(t.hasOwnProperty(i)){if(t[i]===e)return r(i)+"/";if("object"==typeof t[i]&&(o=n(t[i],e),""!=o))return r(i)+"/"+o}return""}function a(t,e){if(t===e)return"/";var r=n(t,e);if(""===r)throw new i("Object not found in root");return"/"+r}function s(t){for(var e=0,r=R.length;r>e;e++)if(R[e].obj===t)return R[e]}function u(t,e){for(var r=0,n=t.observers.length;n>r;r++)if(t.observers[r].callback===e)return t.observers[r].observer}function f(t,e){for(var r=0,n=t.observers.length;n>r;r++)if(t.observers[r].observer===e)return void t.observers.splice(r,1)}function c(t,e){y(e),Object.observe?d(e,t):clearTimeout(e.next);var r=s(t);f(r,e)}function l(t){return"object"==typeof t?JSON.parse(JSON.stringify(t)):t}function h(t,e){var r,n=[],o=t,f=s(t);if(f?r=u(f,e):(f=new U(t),R.push(f)),r)return r;if(Object.observe)r=function(i){d(r,t),p(r,t);for(var s=0,u=i.length;u>s;)"length"===i[s].name&&P(i[s].object)||"__Jasmine_been_here_before__"===i[s].name||I[i[s].type].call(i[s],n,a(o,i[s].object)),s++;n&&e&&e(n),r.patches=n,n=[]};else if(r={},f.value=l(t),e){r.callback=e,r.next=null;var c=this.intervals||[100,1e3,1e4,6e4];if(void 0===c.push)throw new i("jsonpatch.intervals must be an array");var h=0,v=function(){y(r)},g=function(){clearTimeout(r.next),r.next=setTimeout(function(){v(),h=0,r.next=setTimeout(b,c[h++])},0)},b=function(){v(),h==c.length&&(h=c.length-1),r.next=setTimeout(b,c[h++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",g),window.addEventListener("mouseup",g),window.addEventListener("keydown",g)):(document.documentElement.attachEvent("onmousedown",g),document.documentElement.attachEvent("onmouseup",g),document.documentElement.attachEvent("onkeydown",g))),r.next=setTimeout(b,c[h++])}return r.patches=n,r.object=t,f.observers.push(new B(e,r)),p(r,t)}function p(t,e){if(Object.observe){Object.observe(e,t);for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];n&&"object"==typeof n&&p(t,n)}}return t}function d(t,e){if(Object.observe){Object.unobserve(e,t);for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];n&&"object"==typeof n&&d(t,n)}}return t}function y(t){if(Object.observe)Object.deliverChangeRecords(t);else{for(var e,r=0,n=R.length;n>r;r++)if(R[r].obj===t.object){e=R[r];break}v(e.value,t.object,t.patches,""),t.patches.length&&b(e.value,t.patches)}var o=t.patches;return o.length>0&&(t.patches=[],t.callback&&t.callback(o)),o}function v(t,e,n,o){for(var i=A(e),a=A(t),s=!1,u=!1,f=a.length-1;f>=0;f--){var c=a[f],h=t[c];if(e.hasOwnProperty(c)){var p=e[c];"object"==typeof h&&null!=h&&"object"==typeof p&&null!=p?v(h,p,n,o+"/"+r(c)):h!=p&&(s=!0,n.push({op:"replace",path:o+"/"+r(c),value:l(p)}))}else n.push({op:"remove",path:o+"/"+r(c)}),u=!0}if(u||i.length!=a.length)for(var f=0;f<i.length;f++){var c=i[f];t.hasOwnProperty(c)||n.push({op:"add",path:o+"/"+r(c),value:l(e[c])})}}function g(t){for(var e,r=0,n=t.length;n>r;){e=t.charCodeAt(r);{if(!(e>=48&&57>=e))return!1;r++}}return!0}function b(t,e,r){for(var n,o,i=!1,a=0,s=e.length;s>a;){n=e[a],a++;for(var u=n.path||"",f=u.split("/"),c=t,l=1,h=f.length,p=void 0;;){if(o=f[l],r&&void 0===p&&(void 0===c[o]?p=f.slice(0,l).join("/"):l==h-1&&(p=n.path),void 0!==p&&this.validator(n,a-1,t,p)),l++,void 0===o&&l>=h){i=O[n.op].call(n,c,o,t);break}if(P(c)){if("-"===o)o=c.length;else{if(r&&!g(o))throw new S("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a-1,n.path,n);o=parseInt(o,10)}if(l>=h){if(r&&"add"===n.op&&o>c.length)throw new S("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a-1,n.path,n);i=x[n.op].call(n,c,o,t);break}}else if(o&&-1!=o.indexOf("~")&&(o=o.replace(/~1/g,"/").replace(/~0/g,"~")),l>=h){i=k[n.op].call(n,c,o,t);break}c=c[o]}}return i}function m(t,e){var r=[];return v(t,e,r,""),r}function E(t){if(void 0===t)return!0;if("array"==typeof t||"object"==typeof t)for(var e in t)if(E(t[e]))return!0;return!1}function w(e,r,n,o){if("object"!=typeof e||null===e||P(e))throw new S("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,n);if(!k[e.op])throw new S("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,n);if("string"!=typeof e.path)throw new S("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new S("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new S("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&E(e.value))throw new S("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,a=o.split("/").length;if(i!==a+1&&i!==a)throw new S("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==o)throw new S("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,n)}else if("move"===e.op||"copy"===e.op){var s={op:"_get",path:e.from,value:void 0},u=t.validate([s],n);if(u&&"OPERATION_PATH_UNRESOLVABLE"===u.name)throw new S("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,n)}}function _(t,e){try{if(!P(t))throw new S("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)e=JSON.parse(JSON.stringify(e)),b.call(this,e,t,!0);else for(var r=0;r<t.length;r++)this.validator(t[r],r)}catch(n){if(n instanceof S)return n;throw n}}if(!t.observe){var A=function(){return Object.keys?Object.keys:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}}(),k={add:function(t,e){return t[e]=this.value,!0},remove:function(t,e){return delete t[e],!0},replace:function(t,e){return t[e]=this.value,!0},move:function(t,e,r){var n={op:"_get",path:this.from};return b(r,[n]),b(r,[{op:"remove",path:this.from}]),b(r,[{op:"add",path:this.path,value:n.value}]),!0},copy:function(t,e,r){var n={op:"_get",path:this.from};return b(r,[n]),b(r,[{op:"add",path:this.path,value:n.value}]),!0},test:function(t,r){return e(t[r],this.value)},_get:function(t,e){this.value=t[e]}},x={add:function(t,e){return t.splice(e,0,this.value),!0},remove:function(t,e){return t.splice(e,1),!0},replace:function(t,e){return t[e]=this.value,!0},move:k.move,copy:k.copy,test:k.test,_get:k._get},O={add:function(t){O.remove.call(this,t);for(var e in this.value)this.value.hasOwnProperty(e)&&(t[e]=this.value[e]);return!0},remove:function(t){for(var e in t)t.hasOwnProperty(e)&&k.remove.call(this,t,e);return!0},replace:function(t){return b(t,[{op:"remove",path:this.path}]),b(t,[{op:"add",path:this.path,value:this.value}]),!0},move:k.move,copy:k.copy,test:function(t){return JSON.stringify(t)===JSON.stringify(this.value)},_get:function(t){this.value=t}},I={add:function(t,e){var n={op:"add",path:e+r(this.name),value:this.object[this.name]};t.push(n)},"delete":function(t,e){var n={op:"remove",path:e+r(this.name)};t.push(n)},update:function(t,e){var n={op:"replace",path:e+r(this.name),value:this.object[this.name]};t.push(n)}},R=[];t.intervals;var U=function(){function t(t){this.observers=[],this.obj=t}return t}(),B=function(){function t(t,e){this.callback=t,this.observer=e}return t}();t.unobserve=c,t.observe=h,t.generate=y;var P;P=Array.isArray?Array.isArray:function(t){return t.push&&"number"==typeof t.length},t.apply=b,t.compare=m;var S=function(t){function e(e,r,n,o,i){t.call(this,e),this.message=e,this.name=r,this.index=n,this.operation=o,this.tree=i}return o(e,t),e}(i);t.JsonPatchError=S,t.Error=S,t.validator=w,t.validate=_}}(n||(n={})),"undefined"!=typeof r&&(r.apply=n.apply,r.observe=n.observe,r.unobserve=n.unobserve,r.generate=n.generate,r.compare=n.compare,r.validate=n.validate,r.validator=n.validator,r.JsonPatchError=n.JsonPatchError,r.Error=n.Error)},{}],12:[function(t,e,r){r.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,f=u>>1,c=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+t[e+l],l+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+l],l+=h,c-=8);if(0===i)i=1-f;else{if(i===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),i-=f}return(p?-1:1)*a*Math.pow(2,i-n)},r.write=function(t,e,r,n,o,i){var a,s,u,f=8*i-o-1,c=(1<<f)-1,l=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=c?(s=0,a=c):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,f+=o;f>0;t[r+p]=255&a,p+=d,a/=256,f-=8);t[r+p-d]|=128*y}},{}],13:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],14:[function(t,e,r){var n=Array.isArray,o=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==o.call(t)}},{}],15:[function(t,e,r){r.encode=t("./encode").encode,r.decode=t("./decode").decode,r.Encoder=t("./encoder").Encoder,r.Decoder=t("./decoder").Decoder},{"./decode":19,"./decoder":20,"./encode":22,"./encoder":23}],16:[function(t,e,r){function n(t,e){for(var r=this,n=e||0,o=t.length,i=0;o>i;i++){var a=t.charCodeAt(i);128>a?r[n++]=a:2048>a?(r[n++]=192|a>>6,r[n++]=128|63&a):(r[n++]=224|a>>12,r[n++]=128|a>>6&63,r[n++]=128|63&a)}return n-e}function o(t,e){var r=this,n=t-0||0;e||(e=r.length);var o=e-t;o>f&&(o=f);for(var i=[];e>n;){for(var a=new Array(o),s=0;o>s&&e>n;){var u=r[n++];u=128>u?u:224>u?(63&u)<<6|63&r[n++]:(63&u)<<12|(63&r[n++])<<6|63&r[n++],a[s++]=u}o>s&&(a=a.slice(0,s)),i.push(String.fromCharCode.apply("",a))}return i.length>1?i.join(""):i.length?i.shift():""}function i(t){var e=0;return Array.prototype.forEach.call(t,function(t){var r=t.charCodeAt(0);e+=128>r?1:2048>r?2:3}),e}function a(t,e,r,n){var o;r||(r=0),n||0===n||(n=this.length),e||(e=0);var i=n-r;if(t===this&&e>r&&n>e)for(o=i-1;o>=0;o--)t[o+e]=this[o+r];else for(o=0;i>o;o++)t[o+e]=this[o+r];return i}function s(t,e){for(var r=7;r>=0;r--)this[e+r]=255&t,t/=256}function u(t,e){if(t>0)return s.call(this,t,e);t++;for(var r=7;r>=0;r--)this[e+r]=255&-t^255,t/=256}var f=8192;r.writeString=n,r.readString=o,r.byteLength=i,r.copy=a,r.writeUint64BE=s,r.writeInt64BE=u},{}],17:[function(t,e,r){r.BUFFER_SHORTAGE=new Error("BUFFER_SHORTAGE")},{}],18:[function(t,e,r){(function(t){function e(t){return this instanceof e?void(this.options=t||n):new e(t)}r.DecodeBuffer=e;var n={};e.prototype.push=Array.prototype.push,e.prototype.read=Array.prototype.shift,e.prototype.append=function(e){var r=this.offset?this.buffer.slice(this.offset):this.buffer;this.buffer=r?t.concat([r,e]):e,this.offset=0}}).call(this,t("buffer").Buffer)},{buffer:8}],19:[function(t,e,r){function n(t,e){var r=new o(e);return r.append(t),n(r)}r.decode=n;var o=t("./decode-buffer").DecodeBuffer,n=t("./read-core").decode},{"./decode-buffer":18,"./read-core":27}],20:[function(t,e,r){function n(t){return this instanceof n?void i.call(this,t):new n(t)}r.Decoder=n;var o=t("event-lite"),i=t("./decode-buffer").DecodeBuffer,a=t("./read-core").decodeAsync;n.prototype=new i,o.mixin(n.prototype),n.prototype.decode=function(t){t&&this.append(t),a(this)},n.prototype.push=function(t){this.emit("data",t)},n.prototype.end=function(t){this.decode(t),this.emit("end")}},{"./decode-buffer":18,"./read-core":27,"event-lite":9}],21:[function(t,e,r){(function(t){function e(t){return this instanceof e?void(this.options=t||i):new e(t)}r.EncodeBuffer=e;var n=2048,o=65536,i={};e.prototype.push=function(t){var e=this.buffers||(this.buffers=[]);e.push(t)},e.prototype.read=function(){this.flush();var e=this.buffers;if(e){var r=e.length>1?t.concat(e):e[0];return e.length=0,r}},e.prototype.flush=function(){this.start<this.offset&&(this.push(this.buffer.slice(this.start,this.offset)),this.start=this.offset)},e.prototype.reserve=function(t){if(!this.buffer)return this.alloc(t);var e=this.buffer.length;this.offset+t<e||(this.offset&&this.flush(),this.alloc(Math.max(t,Math.min(2*e,o))))},e.prototype.alloc=function(e){this.buffer=new t(e>n?e:n),this.start=0,this.offset=0},e.prototype.send=function(t){var e=this.offset+t.length;this.buffer&&e<this.buffer.length?(t.copy(this.buffer,this.offset),this.offset=e):(this.flush(),this.push(t))}}).call(this,t("buffer").Buffer)},{buffer:8}],22:[function(t,e,r){function n(t,e){var r=new o(e);return n(r,t),r.read()}r.encode=n;var n=t("./write-core").encode,o=t("./encode-buffer").EncodeBuffer},{"./encode-buffer":21,"./write-core":30}],23:[function(t,e,r){function n(t){return this instanceof n?void a.call(this,t):new n(t)}r.Encoder=n;var o=t("event-lite"),i=t("./write-core").encode,a=t("./encode-buffer").EncodeBuffer;n.prototype=new a,o.mixin(n.prototype),n.prototype.encode=function(t){i(this,t),this.emit("data",this.read())},n.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")}},{"./encode-buffer":21,"./write-core":30,"event-lite":9}],24:[function(t,e,r){function n(t,e){return this instanceof n?(this.buffer=t,void(this.type=e)):new n(t,e)}r.ExtBuffer=n},{}],25:[function(t,e,r){(function(e){function n(){v.addExtPacker(14,Error,o(f,g)),v.addExtPacker(1,EvalError,o(f,g)),v.addExtPacker(2,RangeError,o(f,g)),v.addExtPacker(3,ReferenceError,o(f,g)),v.addExtPacker(4,SyntaxError,o(f,g)),v.addExtPacker(5,TypeError,o(f,g)),v.addExtPacker(6,URIError,o(f,g)),v.addExtUnpacker(14,o(b,c(Error))),v.addExtUnpacker(1,o(b,c(EvalError))),v.addExtUnpacker(2,o(b,c(RangeError))),v.addExtUnpacker(3,o(b,c(ReferenceError))),v.addExtUnpacker(4,o(b,c(SyntaxError))),v.addExtUnpacker(5,o(b,c(TypeError))),v.addExtUnpacker(6,o(b,c(URIError))),v.addExtPacker(10,RegExp,o(s,g)),v.addExtPacker(11,Boolean,o(a,g)),v.addExtPacker(12,String,o(a,g)),v.addExtPacker(13,Date,o(Number,g)),v.addExtPacker(15,Number,o(a,g)),v.addExtUnpacker(10,o(b,u)),v.addExtUnpacker(11,o(b,l(Boolean))),v.addExtUnpacker(12,o(b,l(String))),v.addExtUnpacker(13,o(b,l(Date))),v.addExtUnpacker(15,o(b,l(Number))),"undefined"!=typeof Uint8Array&&(v.addExtPacker(17,Int8Array,i),v.addExtPacker(18,Uint8Array,i),v.addExtPacker(19,Int16Array,h),v.addExtPacker(20,Uint16Array,h),v.addExtPacker(21,Int32Array,h),v.addExtPacker(22,Uint32Array,h),v.addExtPacker(23,Float32Array,h),v.addExtUnpacker(17,l(Int8Array)),v.addExtUnpacker(18,l(Uint8Array)),v.addExtUnpacker(19,o(d,l(Int16Array))),v.addExtUnpacker(20,o(d,l(Uint16Array))),v.addExtUnpacker(21,o(d,l(Int32Array))),v.addExtUnpacker(22,o(d,l(Uint32Array))),v.addExtUnpacker(23,o(d,l(Float32Array))),"undefined"!=typeof Float64Array&&(v.addExtPacker(24,Float64Array,h),v.addExtUnpacker(24,o(d,l(Float64Array)))),"undefined"!=typeof Uint8ClampedArray&&(v.addExtPacker(25,Uint8ClampedArray,i),v.addExtUnpacker(25,l(Uint8ClampedArray))),v.addExtPacker(26,ArrayBuffer,p),v.addExtPacker(29,DataView,h),v.addExtUnpacker(26,d),v.addExtUnpacker(29,o(d,l(DataView))))}function o(t){function e(t,e){return e(t)}return t=Array.prototype.slice.call(arguments),function(r){return t.reduce(e,r)}}function i(t){return new e(t)}function a(t){return t.valueOf()}function s(t){t=RegExp.prototype.toString.call(t).split("/"),t.shift();var e=[t.pop()];return e.unshift(t.join("/")),e}function u(t){return RegExp.apply(null,t)}function f(t){var e={};for(var r in m)e[r]=t[r];return e}function c(t){return function(e){var r=new t;for(var n in m)r[n]=e[n];return r}}function l(t){return function(e){return new t(e)}}function h(t){return new e(new Uint8Array(t.buffer))}function p(t){return new e(new Uint8Array(t))}function d(t){return new Uint8Array(t).buffer}var y=t("./ext").Ext,v=r.preset=new y,g=t("./encode").encode,b=t("./decode").decode,m={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};n()}).call(this,t("buffer").Buffer)},{"./decode":19,"./encode":22,"./ext":26,buffer:8}],26:[function(t,e,r){function n(){return this instanceof n?(this.extPackers={},void(this.extUnpackers=[])):new n}r.Ext=n;var o=t("./ext-buffer").ExtBuffer;n.prototype.addExtPacker=function(t,e,r){function n(e){var n=r(e);return new o(n,t)}var i=e.name;if(i&&"Object"!==i)this.extPackers[i]=n;else{var a=this.extEncoderList||(this.extEncoderList=[]);a.unshift([e,n])}},n.prototype.addExtUnpacker=function(t,e){this.extUnpackers[t]=e},n.prototype.getExtPacker=function(t){var e=t.constructor,r=e&&e.name&&this.extPackers[e.name];if(r)return r;var n=this.extEncoderList;if(n)for(var o=n.length,i=0;o>i;i++){var a=n[i];if(e===a[0])return a[1]}},n.prototype.getExtUnpacker=function(t){function e(e){return new o(e,t)}return this.extUnpackers[t]||e}},{"./ext-buffer":24}],27:[function(t,e,r){function n(t){var e=i(t),r=a[e];if(!r)throw new Error("Invalid type: "+(e?"0x"+e.toString(16):e));return r(t)}function o(t){for(;t.offset<t.buffer.length;){var e,r=t.offset;try{e=n(t)}catch(o){if(o!==s)throw o;t.offset=r;break}t.push(e)}}r.decode=n,r.decodeAsync=o;var i=t("./read-format").format.uint8,a=t("./read-token").token,s=t("./common").BUFFER_SHORTAGE},{"./common":17,"./read-format":28,"./read-token":29}],28:[function(t,e,r){(function(e){function n(t,e){var r,n={},o=new Array(e),i=new Array(e);for(r=0;e>r;r++)o[r]=d(t),i[r]=d(t);for(r=0;e>r;r++)n[o[r]]=i[r];return n}function o(t,e){for(var r=new Array(e),n=0;e>n;n++)r[n]=d(t);return r}function i(t,e){var r=t.offset,n=t.offset=r+e;if(n>t.buffer.length)throw v;return g?p.readString.call(t.buffer,r,n):t.buffer.toString("utf-8",r,n)}function a(t,e){var r=t.offset,n=t.offset=r+e;if(n>t.buffer.length)throw v;return t.buffer.slice(r,n)}function s(t,e){var r=t.offset,n=t.offset=r+e+1;if(n>t.buffer.length)throw v;var o=t.buffer[r],i=y.getExtUnpacker(o);if(!i)throw new Error("Invalid ext type: "+(o?"0x"+o.toString(16):o));var a=t.buffer.slice(r+1,n);return i(a)}function u(t){var e=t.buffer;if(t.offset>=e.length)throw v;return e[t.offset++]}function f(t){var e=t.buffer;if(t.offset+2>e.length)throw v;return e[t.offset++]<<8|e[t.offset++]}function c(t,e){return function(r){var n=r.offset,o=r.offset=n+t;if(o>r.buffer.length)throw v;return e.call(r.buffer,n,b)}}function l(t,e){var r=this.readUInt32BE(t,e),n=this.readUInt32BE(t+4,e);return r?4294967296*r+n:n}function h(t,e){var r=this.readInt32BE(t,e),n=this.readUInt32BE(t+4,e);return r?4294967296*r+n:n}r.format={map:n,array:o,str:i,bin:a,ext:s,uint8:u,uint16:f,uint32:c(4,e.prototype.readUInt32BE),uint64:c(8,l),int8:c(1,e.prototype.readInt8),int16:c(2,e.prototype.readInt16BE),int32:c(4,e.prototype.readInt32BE),int64:c(8,h),float32:c(4,e.prototype.readFloatBE),float64:c(8,e.prototype.readDoubleBE)};var p=t("./buffer-lite"),d=t("./read-core").decode,y=t("./ext-preset").preset,v=t("./common").BUFFER_SHORTAGE,g="TYPED_ARRAY_SUPPORT"in e,b=!0}).call(this,t("buffer").Buffer)},{"./buffer-lite":16,"./common":17,"./ext-preset":25,"./read-core":27,buffer:8}],29:[function(t,e,r){function n(){var t;for(t=0;127>=t;t++)s[t]=o(t);for(t=128;143>=t;t++)s[t]=a(t-128,u.map);for(t=144;159>=t;t++)s[t]=a(t-144,u.array);for(t=160;191>=t;t++)s[t]=a(t-160,u.str);for(s[192]=o(null),s[193]=null,s[194]=o(!1),s[195]=o(!0),s[196]=i(u.uint8,u.bin),s[197]=i(u.uint16,u.bin),s[198]=i(u.uint32,u.bin),s[199]=i(u.uint8,u.ext),s[200]=i(u.uint16,u.ext),s[201]=i(u.uint32,u.ext),s[202]=u.float32,s[203]=u.float64,s[204]=u.uint8,s[205]=u.uint16,s[206]=u.uint32,s[207]=u.uint64,s[208]=u.int8,s[209]=u.int16,s[210]=u.int32,s[211]=u.int64,s[212]=a(1,u.ext),s[213]=a(2,u.ext),s[214]=a(4,u.ext),s[215]=a(8,u.ext),s[216]=a(16,u.ext),s[217]=i(u.uint8,u.str),s[218]=i(u.uint16,u.str),s[219]=i(u.uint32,u.str),s[220]=i(u.uint16,u.array),s[221]=i(u.uint32,u.array),s[222]=i(u.uint16,u.map),s[223]=i(u.uint32,u.map),t=224;255>=t;t++)s[t]=o(t-256)}function o(t){return function(){return t}}function i(t,e){return function(r){var n=t(r);return e(r,n)}}function a(t,e){return function(r){return e(r,t)}}var s=r.token=new Array(256),u=t("./read-format").format;n()},{"./read-format":28}],30:[function(t,e,r){function n(t,e){var r=o[typeof e];if(!r)throw new Error('Unsupported type "'+typeof e+'": '+e);r(t,e)}r.encode=n;var o=t("./write-type").type},{"./write-type":32}],31:[function(t,e,r){(function(e){function n(){for(var t=0;255>=t;t++)c[t]=h[t];y?i():o()}function o(){c[196]=a(196),c[197]=s(197),c[198]=u(198),c[199]=a(199),c[200]=s(200),c[201]=u(201),c[202]=f(202,4,e.prototype.writeFloatBE),c[203]=f(203,8,e.prototype.writeDoubleBE),c[204]=a(204),c[205]=s(205),c[206]=u(206),c[207]=f(207,8,l.writeUint64BE),c[208]=a(208),c[209]=s(209),c[210]=u(210),c[211]=f(211,8,l.writeUint64BE),c[217]=a(217),c[218]=s(218),c[219]=u(219),c[220]=s(220),c[221]=u(221),c[222]=s(222),c[223]=u(223)}function i(){c[196]=f(196,1,e.prototype.writeUInt8),c[197]=f(197,2,e.prototype.writeUInt16BE),c[198]=f(198,4,e.prototype.writeUInt32BE),c[199]=f(199,1,e.prototype.writeUInt8),c[200]=f(200,2,e.prototype.writeUInt16BE),c[201]=f(201,4,e.prototype.writeUInt32BE),c[202]=f(202,4,e.prototype.writeFloatBE),c[203]=f(203,8,e.prototype.writeDoubleBE),c[204]=f(204,1,e.prototype.writeUInt8),c[205]=f(205,2,e.prototype.writeUInt16BE),c[206]=f(206,4,e.prototype.writeUInt32BE),c[207]=f(207,8,l.writeUint64BE),c[208]=f(208,1,e.prototype.writeInt8),c[209]=f(209,2,e.prototype.writeInt16BE),c[210]=f(210,4,e.prototype.writeInt32BE),c[211]=f(211,8,l.writeUint64BE),c[217]=f(217,1,e.prototype.writeUInt8),c[218]=f(218,2,e.prototype.writeUInt16BE),c[219]=f(219,4,e.prototype.writeUInt32BE),c[220]=f(220,2,e.prototype.writeUInt16BE),c[221]=f(221,4,e.prototype.writeUInt32BE),c[222]=f(222,2,e.prototype.writeUInt16BE),c[223]=f(223,4,e.prototype.writeUInt32BE)}function a(t){return function(e,r){e.reserve(2);var n=e.buffer,o=e.offset;n[o++]=t,n[o++]=r,e.offset=o}}function s(t){return function(e,r){e.reserve(3);var n=e.buffer,o=e.offset;n[o++]=t,n[o++]=r>>>8,n[o++]=r,e.offset=o}}function u(t){return function(e,r){e.reserve(5);var n=e.buffer,o=e.offset;n[o++]=t,n[o++]=r>>>24,n[o++]=r>>>16,n[o++]=r>>>8,n[o++]=r,e.offset=o}}function f(t,e,r){return function(n,o){n.reserve(e+1),n.buffer[n.offset++]=t,r.call(n.buffer,o,n.offset,p),n.offset+=e}}var c=r.token=new Array(256),l=t("./buffer-lite"),h=t("./write-uint8").uint8,p=!0,d="TYPED_ARRAY_SUPPORT"in e,y=d&&!e.TYPED_ARRAY_SUPPORT;n()}).call(this,t("buffer").Buffer)},{"./buffer-lite":16,"./write-uint8":33,buffer:8}],32:[function(t,e,r){(function(e){function n(t,e){var r=e?195:194;d[r](t,e)}function o(t,e){var r,n=0|e;return e!==n?(r=203,void d[r](t,e)):(r=n>=-32&&127>=n?255&n:n>=0?255>=n?204:65535>=n?205:206:n>=-128?208:n>=-32768?209:210,void d[r](t,n))}function i(t,e){var r=e.length,n=5+3*r;t.reserve(n);var o=32>r?1:255>=r?2:65535>=r?3:5,i=t.offset+o;r=p.writeString.call(t.buffer,e,i);var a=32>r?1:255>=r?2:65535>=r?3:5;if(o!==a){var s=t.offset+a,u=i+r;m?p.copy.call(t.buffer,t.buffer,s,i,u):t.buffer.copy(t.buffer,s,i,u)}var f=1===a?160+r:3>=a?215+a:219;d[f](t,r),t.offset+=r}function a(t,r){if(E(r))return u(t,r);if(null===r)return s(t,r);var n=g.getExtPacker(r);return n&&(r=n(r)),r instanceof b?c(t,r):e.isBuffer(r)?f(t,r):void l(t,r)}function s(t,e){var r=192;d[r](t,e)}function u(t,e){var r=e.length,n=16>r?144+r:65535>=r?220:221;d[n](t,r);for(var o=0;r>o;o++)y(t,e[o])}function f(t,e){var r=e.length,n=255>r?196:65535>=r?197:198;d[n](t,r),t.send(e)}function c(t,e){var r=e.buffer,n=r.length,o=w[n]||(255>n?199:65535>=n?200:201);d[o](t,n),v[e.type](t),t.send(r)}function l(t,e){var r=Object.keys(e),n=r.length,o=16>n?128+n:65535>=n?222:223;d[o](t,n),r.forEach(function(r){y(t,r),y(t,e[r])})}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}r.type={"boolean":n,"function":s,number:o,object:a,string:i,symbol:s,undefined:s};var p=t("./buffer-lite"),d=t("./write-token").token,y=t("./write-core").encode,v=t("./write-uint8").uint8,g=t("./ext-preset").preset,b=t("./ext-buffer").ExtBuffer,m="TYPED_ARRAY_SUPPORT"in e,E=Array.isArray||h,w=[];w[1]=212,w[2]=213,w[4]=214,w[8]=215,w[16]=216}).call(this,t("buffer").Buffer)},{"./buffer-lite":16,"./ext-buffer":24,"./ext-preset":25,"./write-core":30,"./write-token":31,"./write-uint8":33,buffer:8}],33:[function(t,e,r){function n(t){return function(e){e.reserve(1),e.buffer[e.offset++]=t}}for(var o=r.uint8=new Array(256),i=0;255>=i;i++)o[i]=n(i)},{}],34:[function(t,e,r){e.exports=t("./lib/checks")},{"./lib/checks":35}],35:[function(t,e,r){function n(t,e,r,n){r=r||"";var o=u.format.apply(this,[r].concat(n)),i=new t(o);throw Error.captureStackTrace(i,e),i}function o(t,e,r){n(f.IllegalArgumentError,t,e,r)}function i(t,e,r){n(f.IllegalStateError,t,e,r)}function a(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array"}return e}function s(t){return function(e,r){var n=a(e);return n==t?e:void o(arguments.callee,r||'Expected "'+t+'" but got "'+n+'".',Array.prototype.slice.call(arguments,2))}}var u=t("util"),f=e.exports=t("./errors");e.exports.checkArgument=function(t,e){t||o(arguments.callee,e,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(t,e){t||i(arguments.callee,e,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(t,e){return void 0!==t?t:void o(arguments.callee,e||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(t,e){return null!=t?t:void o(arguments.callee,e||'Expected value to be defined and not null but got "'+a(t)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=s("string"),e.exports.checkIsArray=s("array"),e.exports.checkIsNumber=s("number"),e.exports.checkIsBoolean=s("boolean"),e.exports.checkIsFunction=s("function"),e.exports.checkIsObject=s("object")},{"./errors":36,util:39}],36:[function(t,e,r){function n(t){Error.call(this,t),this.message=t}function o(t){Error.call(this,t),this.message=t}var i=t("util");i.inherits(n,Error),n.prototype.name="IllegalArgumentError",i.inherits(o,Error),o.prototype.name="IllegalStateError",e.exports.IllegalStateError=o,e.exports.IllegalArgumentError=n},{util:39}],37:[function(t,e,r){function n(){c=!1,s.length?f=s.concat(f):l=-1,f.length&&o()}function o(){if(!c){var t=setTimeout(n);c=!0;for(var e=f.length;e;){for(s=f,f=[];++l<e;)s&&s[l].run();l=-1,e=f.length}s=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},f=[],c=!1,l=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new i(t,e)),1!==f.length||c||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],38:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],39:[function(t,e,r){(function(e,n){function o(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(e)?n.showHidden=e:e&&r._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),u(n,t,n.depth)}function i(t,e){var r=o.styles[e];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&O(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(n,t);return m(o)||(o=u(t,o,n)),o}var i=f(t,e);if(i)return i;var a=Object.keys(e),y=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),x(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(e);if(0===a.length){if(O(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(_(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return c(e)}var g="",b=!1,E=["{","}"];if(d(e)&&(b=!0,E=["[","]"]),O(e)){var w=e.name?": "+e.name:"";g=" [Function"+w+"]"}if(_(e)&&(g=" "+RegExp.prototype.toString.call(e)),k(e)&&(g=" "+Date.prototype.toUTCString.call(e)),x(e)&&(g=" "+c(e)),0===a.length&&(!b||0==e.length))return E[0]+g+E[1];if(0>n)return _(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var A;return A=b?l(t,e,n,y,a):a.map(function(r){return h(t,e,n,y,r,b)}),t.seen.pop(),p(A,g,E)}function f(t,e){if(w(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(e)?t.stylize(""+e,"number"):y(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,o){for(var i=[],a=0,s=e.length;s>a;++a)P(e,String(a))?i.push(h(t,e,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(t,e,r,n,o,!0))}),i}function h(t,e,r,n,o,i){var a,s,f;if(f=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},f.get?s=f.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):f.set&&(s=t.stylize("[Setter]","special")),P(n,o)||(a="["+o+"]"),s||(t.seen.indexOf(f.value)<0?(s=v(r)?u(t,f.value,null):u(t,f.value,r-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,r){var n=0,o=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function v(t){return null===t}function g(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function E(t){return"symbol"==typeof t;
}function w(t){return void 0===t}function _(t){return A(t)&&"[object RegExp]"===R(t)}function A(t){return"object"==typeof t&&null!==t}function k(t){return A(t)&&"[object Date]"===R(t)}function x(t){return A(t)&&("[object Error]"===R(t)||t instanceof Error)}function O(t){return"function"==typeof t}function I(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function R(t){return Object.prototype.toString.call(t)}function U(t){return 10>t?"0"+t.toString(10):t.toString(10)}function B(){var t=new Date,e=[U(t.getHours()),U(t.getMinutes()),U(t.getSeconds())].join(":");return[t.getDate(),L[t.getMonth()],e].join(" ")}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var S=/%[sdj%]/g;r.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(t).replace(S,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),s=n[r];i>r;s=n[++r])a+=v(s)||!A(s)?" "+s:" "+o(s);return a},r.deprecate=function(t,o){function i(){if(!a){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),a=!0}return t.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return i};var T,D={};r.debuglog=function(t){if(w(T)&&(T=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(T)){var n=e.pid;D[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else D[t]=function(){};return D[t]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=y,r.isNull=v,r.isNullOrUndefined=g,r.isNumber=b,r.isString=m,r.isSymbol=E,r.isUndefined=w,r.isRegExp=_,r.isObject=A,r.isDate=k,r.isError=x,r.isFunction=O,r.isPrimitive=I,r.isBuffer=t("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",B(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!A(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":38,_process:37,inherits:13}],40:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(r,"__esModule",{value:!0});var i=t("backoff"),a=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1],o=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];n(this,t),this.url=e,this._protocols=r,this.reconnectEnabled=!0,this.listeners={},this.backoff=i[o.backoff||"fibonacci"](o),this.backoff.on("backoff",this.onBackoffStart.bind(this)),this.backoff.on("ready",this.onBackoffReady.bind(this)),this.backoff.on("fail",this.onBackoffFail.bind(this)),this.open()}return o(t,[{key:"open",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.isReconnect=t,this.ws=new WebSocket(this.url,this._protocols),this.ws.onclose=this.onCloseCallback.bind(this),this.ws.onerror=this.onErrorCallback.bind(this),this.ws.onmessage=this.onMessageCallback.bind(this),this.ws.onopen=this.onOpenCallback.bind(this)}},{key:"onBackoffStart",value:function(t,e){}},{key:"onBackoffReady",value:function(t,e){this.open(!0)}},{key:"onBackoffFail",value:function(){}},{key:"onCloseCallback",value:function(){!this.isReconnect&&this.listeners.onclose&&this.listeners.onclose.apply(null,arguments),this.reconnectEnabled&&this.backoff.backoff()}},{key:"onErrorCallback",value:function(){this.listeners.onerror&&this.listeners.onerror.apply(null,arguments)}},{key:"onMessageCallback",value:function(){this.listeners.onmessage&&this.listeners.onmessage.apply(null,arguments)}},{key:"onOpenCallback",value:function(){this.listeners.onopen&&this.listeners.onopen.apply(null,arguments),this.isReconnect&&this.listeners.onreconnect&&this.listeners.onreconnect.apply(null,arguments),this.isReconnect=!1}},{key:"close",value:function(t,e){"undefined"==typeof t&&(t=1e3),this.reconnectEnabled=!1,this.ws.close(t,e)}},{key:"send",value:function(t){this.ws.send(t)}},{key:"bufferedAmount",get:function(){return this.ws.bufferedAmount}},{key:"readyState",get:function(){return this.ws.readyState}},{key:"binaryType",get:function(){return this.ws.binaryType},set:function(t){this.ws.binaryType=t}},{key:"extensions",get:function(){return this.ws.extensions},set:function(t){this.ws.extensions=t}},{key:"protocol",get:function(){return this.ws.protocol},set:function(t){this.ws.protocol=t}},{key:"onclose",set:function(t){this.listeners.onclose=t},get:function(){return this.listeners.onclose}},{key:"onerror",set:function(t){this.listeners.onerror=t},get:function(){return this.listeners.onerror}},{key:"onmessage",set:function(t){this.listeners.onmessage=t},get:function(){return this.listeners.onmessage}},{key:"onopen",set:function(t){this.listeners.onopen=t},get:function(){return this.listeners.onopen}},{key:"onreconnect",set:function(t){this.listener.onreconnect=t},get:function(){return this.listeners.onreconnect}}]),t}();a.CONNECTING=WebSocket.CONNECTING,a.OPEN=WebSocket.OPEN,a.CLOSING=WebSocket.CLOSING,a.CLOSED=WebSocket.CLOSED,r["default"]=a},{backoff:1}],41:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(u){o=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=function E(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:E(o,e,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)},c=t("websocket.js"),l=n(c),h=t("msgpack-lite"),p=n(h),d=t("fast-json-patch"),y=n(d),v=t("./protocol"),g=n(v),b=t("./room"),m=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];o(this,e);var a=i(this,Object.getPrototypeOf(e).call(this,t,r,n));return a.binaryType="arraybuffer",a.roomStates={},a.rooms={},a._enqueuedCalls=[],a}return a(e,t),u(e,[{key:"onOpenCallback",value:function(t){if(this._enqueuedCalls.length>0)for(var e=0;e<this._enqueuedCalls.length;e++){var r=s(this._enqueuedCalls[e],2),n=r[0],o=r[1];this[n].apply(this,o)}}},{key:"send",value:function(t){return f(Object.getPrototypeOf(e.prototype),"send",this).call(this,p["default"].encode(t))}},{key:"join",value:function(t,e){return this.rooms[t]||(this.rooms[t]=(0,b.createRoom)(this,t)),this.ws.readyState==WebSocket.OPEN?this.send([g["default"].JOIN_ROOM,t,e||{}]):this._enqueuedCalls.push(["join",arguments]),this.rooms[t]}},{key:"onMessageCallback",value:function(t){var e=p["default"].decode(new Uint8Array(t.data));if(console.log("colyseus.js: ",e),"number"==typeof e[0]){var r=e[1];if(e[0]==g["default"].USER_ID)return this.id=e[1],this.listeners.onopen&&this.listeners.onopen.apply(null),!0;if(e[0]==g["default"].JOIN_ROOM)return this.rooms[e[2]]&&(this.rooms[r]=this.rooms[e[2]],delete this.rooms[e[2]]),this.rooms[r].id=r,this.rooms[r].emit("join"),!0;if(e[0]==g["default"].JOIN_ERROR)return this.rooms[r].emit("error",e[2]),delete this.rooms[r],!0;if(e[0]==g["default"].LEAVE_ROOM)return this.rooms[r].emit("leave"),!0;if(e[0]==g["default"].ROOM_STATE){var n=e[2];return this.rooms[r].state=n,this.rooms[r].emit("update",n),this.roomStates[r]=n,!0}if(e[0]==g["default"].ROOM_STATE_PATCH)return this.rooms[r].emit("patch",e[2]),y["default"].apply(this.roomStates[r],e[2]),this.rooms[r].emit("update",this.roomStates[r],e[2]),!0;e[0]==g["default"].ROOM_DATA&&(this.rooms[r].emit("data",e[2]),e=[e[2]])}this.listeners.onmessage&&this.listeners.onmessage.apply(null,e)}}]),e}(l["default"]);e.exports=m},{"./protocol":42,"./room":43,"fast-json-patch":11,"msgpack-lite":15,"websocket.js":40}],42:[function(t,e,r){"use strict";e.exports.USER_ID=1,e.exports.JOIN_ROOM=10,e.exports.JOIN_ERROR=11,e.exports.LEAVE_ROOM=12,e.exports.ROOM_DATA=13,e.exports.ROOM_STATE=14,e.exports.ROOM_STATE_PATCH=15,e.exports.BAD_REQUEST=50},{}],43:[function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return new c(t,e)}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();Object.defineProperty(r,"__esModule",{value:!0}),r.createRoom=a;var u=t("events").EventEmitter,f=t("./protocol"),c=function(t){function e(t,r){n(this,e);var i=o(this,Object.getPrototypeOf(e).call(this));return i.id=null,i.client=t,i.name=r,i.state={},i.on("leave",function(){return i.removeAllListeners()}),i}return i(e,t),s(e,[{key:"leave",value:function(){this.id&&this.client.send([f.LEAVE_ROOM,this.id])}},{key:"send",value:function(t){this.client.send([f.ROOM_DATA,this.id,t])}}]),e}(u)},{"./protocol":42,events:10}]},{},[41])(41)});
